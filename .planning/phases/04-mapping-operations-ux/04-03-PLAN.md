---
phase: 04-mapping-operations-ux
plan: 03
type: execute
wave: 2
depends_on: ["04-01", "04-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All Phase 4 success criteria verified by human tester"
    - "Search/filter, visual indicators, undo/redo, and zoom/pan all working together"
  artifacts: []
  key_links: []
---

<objective>
Verify all Phase 4 features work correctly through human testing of the mapper interface.

Purpose: Phase 4 introduces interactive UX enhancements (search, undo/redo, visual indicators) that require visual and functional verification a human can perform but automated tests cannot fully cover.

Output: Verification confirmation that all Phase 4 success criteria pass.
</objective>

<execution_context>
@C:/Users/gary_/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/gary_/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: Verify all Phase 4 mapping operations and UX enhancements</name>
  <files>src/app/mapper/page.tsx</files>
  <action>
    Human verification checkpoint. Start the dev server (`npm run dev`) and navigate to http://localhost:3000/mapper.

    Phase 4 adds five capabilities to the mapper interface:
    1. Search/filter fields by name in both source and target panels
    2. Enhanced required vs optional visual indicators (red left border, asterisk)
    3. Color-coded field type badges (string=blue, number=purple, boolean=amber, date=teal)
    4. Undo/redo for mapping actions (Ctrl+Z / Ctrl+Shift+Z) with toolbar buttons
    5. Zoom/pan controls on the mapping canvas (React Flow Controls component)

    **Test 1: Search/Filter (MAP-04)**
    1. Upload a source schema file (use sample-source-order.xml or a JSON sample)
    2. Upload a target schema file (use sample-target-transfer.json or a JSON sample)
    3. In the source panel, locate the search input above the field list
    4. Type a partial field name (e.g., "amount" or "date")
    5. Verify: Only fields matching the search term are visible
    6. Verify: Parent fields of matching children remain visible (tree structure preserved)
    7. Verify: No noticeable lag while typing (debounced)
    8. Clear the search input
    9. Verify: All fields restored to view
    10. Repeat for target panel

    **Test 2: Visual Indicators (MAP-05, MAP-06)**
    1. With schemas loaded, examine the field list
    2. Verify: Required fields show red asterisk (*) and red left border
    3. Verify: Optional fields have no red indicators
    4. Verify: String fields have blue-tinted type badge
    5. Verify: Number/integer fields have purple-tinted type badge
    6. Verify: Boolean fields have amber-tinted type badge
    7. Verify: Object fields have gray type badge
    8. Verify: Array fields have indigo type badge

    **Test 3: Undo/Redo (MAP-07)**
    1. Locate the toolbar between upload panels and canvas (should show undo/redo buttons)
    2. Verify: Both undo and redo buttons are disabled (gray, not clickable)
    3. Draw a connection from a source field to a target field
    4. Verify: Undo button becomes enabled
    5. Click the Undo button (or press Ctrl+Z)
    6. Verify: Connection is removed
    7. Verify: Redo button becomes enabled
    8. Click the Redo button (or press Ctrl+Shift+Z or Ctrl+Y)
    9. Verify: Connection is restored
    10. Draw 3 connections, then undo all 3 one by one
    11. Verify: Each undo removes the most recent connection
    12. Delete a connection (select and press Backspace)
    13. Press Ctrl+Z
    14. Verify: Deleted connection is restored

    **Test 4: Zoom/Pan (MAP-08)**
    1. With schemas loaded, look at the bottom-left corner of the canvas
    2. Verify: Zoom in (+), zoom out (-), fit view, and interactive toggle buttons visible
    3. Click zoom in button several times
    4. Verify: Canvas zooms in smoothly
    5. Click fit view button
    6. Verify: Canvas fits both panels in view
    7. Click and drag on empty canvas area
    8. Verify: Canvas pans smoothly
    9. Use mouse wheel to zoom
    10. Verify: Zoom responds without lag

    **Test 5: Integration Check**
    1. With schemas loaded and connections drawn
    2. Search for a field that has a mapping connection
    3. Verify: Connection lines remain visible for filtered fields
    4. Undo a connection while search is active
    5. Verify: Connection removed correctly even with filter active
  </action>
  <verify>All 5 test scenarios pass visual and functional verification</verify>
  <done>Human tester confirms all Phase 4 success criteria are met: search/filter, visual indicators, undo/redo, and zoom/pan all working correctly</done>
</task>

</tasks>

<verification>
Human verification of all 5 test scenarios covering MAP-04, MAP-05, MAP-06, MAP-07, MAP-08.
</verification>

<success_criteria>
All Phase 4 success criteria confirmed working by human tester:
- Search/filter fields works in both panels
- Required vs optional indicators clearly visible
- Type badges color-coded
- Undo/redo works for connections (keyboard and buttons)
- Zoom/pan controls functional
</success_criteria>

<output>
After completion, create `.planning/phases/04-mapping-operations-ux/04-03-SUMMARY.md`
</output>
